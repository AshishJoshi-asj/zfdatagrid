#summary Documentation for Bvb_Grid_Deploy_JqGrid class

<wiki:toc max_depth="3" />

= Introduction =

This is documentation for *[http://www.trirand.com/blog/jqgrid/jqgrid.html jqGrid]* front-end implementation for *ZFDatgrid library*. Look at this *[http://www.k2s.sk/grid/jqgrid example]* to see it in action.

The actual class implementation is developed under own [http://code.google.com/p/zfdatagrid/source/browse/#svn/branches/jqGrid ZFDatagrid branch]. It will be merged into trunk when completed and accepted by [http://code.google.com/u/pao.fresco/ project owner].

== Current plans==
  * keep jqGrid front-end as much as possible compatible with HTML Table front-end
  * allow to pass all configuration options of jqGrid from PHP
  * add PHP functions which will provide easy way to complex jqGrid functionality
  * evaluate what parts of Bvb should be improved to use full power of booth libraries
  * provide documentation and examples

== Future plans ==
  * support for `Bvb_Grid_Filters` definition (actual implementation is not usign the Bvb interpretation)
  * user settings persistence - saving of the state (ordering, current page, filters, etc.) in cookie
  * support [http://www.trirand.com/jqgridwiki/doku.php?id=wiki:advanced_searching Advanced searching]
  * allow formatters to change jqGrid settings and work with different deploy classes (need Bvb redesign)
    * create set of useful formatters
  * CRUD operations
  * evaluate possibility and usefulness to support:
    * (jqgrid) filter input controls (text and select is supported, but date, date range, etc. should be added)
    * (jqgrid) sortname
    * (jqgrid) column chooser
    * (jqgrid) column reorder
    * (jqgrid) summary footer row, (Bvb) SQL Expressions
    * (jqgrid) autoloading when scrolling
    * (jqgrid) Adjacency List Model
    * (jqgrid) subforms
    * (jqgrid) tree
    * (Bvb) horizontal row
    * not to use ZendX_JQuery
    * don't need to provide data via Ajax (means always to render the page)

== Installation ==
In general the project which wants to use {{{Bvb_Grid_Deploy_JqGrid}}} class has to accomplish:
  * include path set to directories where following libraries are located:
    * Zend
    * ZendX (it is possible to change the class not to use ZendX)
    * Bvb (ZFDataGrid) - *you have to use the jqGrid branch*
{{{
svn checkout http://zfdatagrid.googlecode.com/svn/branches/jqGrid/trunk/library/Bvb Bvb
}}}
  * full jqGrid library accessible from URL
    * download from http://www.trirand.com/blog/?page_id=6 (check all modules, we are not testing with other configuration)
    * uncompress to publicly accessible folder (you will not need the src subfolder)
  * configure {{{Bvb_Grid_Deploy_JqGrid}}} to use your URL pointing to folder with jqGrid library (best place is to do it in bootsrap)
{{{
Bvb_Grid_Deploy_JqGrid::$jqgridLibPath = $myurl;
}}}
  * use {{{Bvb_Grid_Deploy_JqGrid}}} instead of {{{Bvb_Grid_Deploy_Table class}}}
  * if you already used ZFDatagrid in your project and simple replace of {{{Bvb_Grid_Deploy_Table}}} with {{{Bvb_Grid_Deploy_JqGrid}}} should work
  * *you have to call function {{{Bvb_Grid_Deploy_Table::ajax()}}} before {{{deploy()}}}*
  * add output from [http://framework.zend.com/manual/en/zendx.jquery.html ZendX_JQuery_View_Helper_JQuery] into your HTML header

<wiki:comment>
chapter about === Install Sample Project ===
</wiki:comment>

== Code ==
  * at this moment you need to use [http://code.google.com/p/zfdatagrid/source/browse/#svn/branches/jqGrid jqGrid branch] from repository to use this class
  * code formating follows the Zend standard and is checked regularly with [http://pear.php.net/package/PHP_CodeSniffer PHP_CodeSniffer]
  * code documentation on [http://www.k2s.sk/gridapi/library/Bvb/Grid/Deploy/Bvb_Grid_Deploy_JqGrid.class.html http://www.k2s.sk/gridapi] was generated by [http://www.phpsimpledoc.org/ phpSimpleDoc]

= Usage =

Before you continue you should:
  * read actual [http://code.google.com/p/zfdatagrid/downloads/list ZFDatagrid manual]
  * check [http://www.trirand.com/blog/jqgrid/jqgrid.html examples of jqGrid]
  * read [http://www.trirand.com/jqgridwiki jqGrid wiki]

== Steps to configure jqGrid ==
You will find all necessarily steps in our [http://www.k2s.sk/grid/jqgrid example] (*[http://www.k2s.sk/grid/jqgrid/code view code]*).

  # define {{{Zend_Db_Select}}} object and pass it to grid
  # update column options
  # configure Bvb grid behaviour (available in {{{Bvb_Grid_DataGrid}}})
  # configure jqGrid options {{{Bvb_Grid_Deploy_JqGrid}}}
  # set ajax ID
  # deploy and display in view

== Object configuration options ==
TODO explain array notation and set functions
TODO explain Zend_Config usage

There are 3 categories of options which could be configured in `Bvb_Grid_Deploy_JqGrid`. Names of this options are coming from different domains and their names could collide, so we need to add an domain prefix to them.

|| *Option type* || *Prefix* ||
|| `Bvb_Grid_DataGrid` native options || no prefix ||
|| `Bvb_Grid_Deploy_JqGrid` own options || bvb ||
|| jqGrid native options || jqg ||

=== ZFDatagrid native column options ===
|| *Option/Function()* || *Explanation* ||
|| title || translated to `jqGrid.colModel.name` property ||
|| hide || Bvb implementation is removing the field also from result set so this is not the same as `jqGrid.colModel.hidden`, see [http://code.google.com/p/zfdatagrid/issues/detail?id=109 #109] ||
|| decorator || normal behavior ||
|| <strike>hRow</strike> || not supported, see [#Future_plans] ||
|| callback || normal behavior ||
|| eval || normal behavior ||
|| order || normal behavior ||
|| class || normal behavior ||
|| searchType || normal behavior ||
|| format || normal behavior, but formatter have no way to configure jqGrid properies, see see [#Future_plans] ||
|| Extra Fields || normal behavior ||
|| <strike>SQL Expressions</strike> || see [#Future_plans] ||
|| Ajax || mandatory to call `ajax()` method ||

<sup>`*` check [http://www.k2s.sk/grid/jqgrid example] *[http://www.k2s.sk/grid/jqgrid/code code]* and [http://www.k2s.sk/gridapi/ API documentation]</sup>

=== jqGrid column options ===
|| *Option/Function()* || *Explanation* ||
|| jqgSet*{jqGrid Property name}*() || set parameter from jqGrid domain [http://www.trirand.com/jqgridwiki/doku.php?id=wiki:colmodel_options jqGrid colModel property] with jqg ||
|| bvbSet*{jqGrid Property name}*() || set parameter from `Bvb_Grid_Deploy_JqGrid` domain ||
|| bvbNavGrid ||  ||
|| bvbNavButtons ||  ||
|| bvbAddNavButton() ||  ||
|| bvbClearNavButtons() ||  ||
|| bvbId || value of defined column will be set as HTML ID attribute for each row, the value should be unique, see [http://www.trirand.com/jqgridwiki/doku.php?id=wiki:retrieving_data jqGrid data manupulation manual] ||


<sup>`*` check [http://www.k2s.sk/grid/jqgrid example] *[http://www.k2s.sk/grid/jqgrid/code code]* and [http://www.k2s.sk/gridapi/ API documentation]</sup>

=== ZFDatagrid native options ===
|| *Option/Function()* || *Explanation* ||
|| noFilters() || [http://www.trirand.com/jqgridwiki/doku.php?id=wiki:toolbar_searching toolbar searching] functionality will not be initialized ||
|| noOrder() || [http://www.trirand.com/jqgridwiki/doku.php?id=wiki:options viewsortcols] will be configured not to allow sorting of columns ||
|| setDefaultFilters() || normal behavior ||
|| setPagination() ||  ||
|| setBvbFirstDataAsLocal() || ||
|| setPrimary() || ignored ||

<sup>`*` check [http://www.k2s.sk/grid/jqgrid example] *[http://www.k2s.sk/grid/jqgrid/code code]* and [http://www.k2s.sk/gridapi/ API documentation]</sup>

=== jqGrid grid options ===
|| *Option/Function()* || *Explanation* ||
|| setJqgOptions() || pass array with any [http://www.trirand.com/jqgridwiki/doku.php?id=wiki:options jqGrid options] ||
|| setJqgOnInit() || adds javascript code to be executed after jqGrid will be initiated in web browser ||
|| clearJqgOnInit() || removes all javascript code added by setJqgOnInit() ||

<sup>`*` check [http://www.k2s.sk/grid/jqgrid example] *[http://www.k2s.sk/grid/jqgrid/code code]* and [http://www.k2s.sk/gridapi/ API documentation]</sup>

== Publishing results ==
Results from {{{Bvb_Grid_Deploy_JqGrid}}} object are sent to web browser in situations to display the grid and to provide data to grid.

You need to call `deploy()` function *to render the grid on your HTML page*. This function returns HTML part of the grid and that needs to be added you your controller response. This function also adds javascript code to ZendX jQuery view helper and that need also to be added to controller response.

You could do following in your view script:
{{{
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
...
  <!-- next line will add all necessery JavaScript and CSS includes -->
  <?php echo $this->jQuery();?>
...
</head>
<body>
...
<!-- next line will output HTML part of grid -->
<?=$this->grid->deploy();?>
...
</body></html>
}}}

If you are using [http://framework.zend.com/manual/en/zend.layout.html Zend_Layout] put the jQuery part into your layout script.

The other situation when results of `Bvb_Grid_Deploy_JqGrid` are sent to web browser is when the *front-end requests data through ajax*. This requests is recognized in `ajax()` function which will send requested data and stop Zend Application. The `ajax()` function should to be called before `deploy()` function.

= FAQ =

= Licence =
Development of this class is sponsored by [http://www.xtmotion.co.uk/ XTMotion] and the code is released under the [http://code.google.com/p/zfdatagrid/ same licence] as ZFDatagrid. 

This extension to ZFDatagrid would not exists without the superior [http://www.trirand.com/jqgridwiki jqGrid library]. You may be interested in their original commercial solutions at http://www.trirand.net/.